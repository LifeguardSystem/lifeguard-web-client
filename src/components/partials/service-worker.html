<script type="module">
  const allowsServiceWorker = "serviceWorker" in navigator;
  const isLocal = location.hostname === "localhost";
  const serviceWorkerPath = isLocal
    ? "/service-worker-mock.js"
    : "/service-worker.js";

  if (allowsServiceWorker) {
    try {
      navigator.serviceWorker.register(serviceWorkerPath, {
        type: "module",
      });
    } catch (error) {
      console.error("ServiceWorker registration failed: ", error);
    }
  }
</script>
